% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/build_detection_histories.R
\name{build_detection_histories}
\alias{build_detection_histories}
\title{Build Detection Histories from Observation Events}
\usage{
build_detection_histories(
  observations,
  route_sites,
  tag_col = "tag_code",
  time_col = "event_time",
  site_col = "site_code"
)
}
\arguments{
\item{observations}{A data.frame or tibble of PTAGIS observation events. Must include
columns for tag codes, site codes, and event timestamps.}

\item{route_sites}{Character vector of site codes defining the downstream route order.
Example: \code{c("LGR","LGS","LMN","MCN")}.}

\item{tag_col}{Character; column name in \code{tag_history} containing PIT tag codes.
Default is \code{"tag_code"}.}

\item{time_col}{Character; optional column name in \code{tag_history} containing
event timestamps (POSIXct or parseable) used to order events within tag.}

\item{site_col}{Character; column name in \code{tag_history} containing site codes.
Default is \code{"site_code"}.}
}
\value{
A list with two elements:
\itemize{
\item \code{long} – a long-format table of detections with columns \code{tag}, \code{site}, and \code{time},
ordered by tag, time, and site.
\item \code{wide} – a wide-format table with one row per tag, columns for each site indicating
presence/absence (0/1), and an \code{encounter_history} string summarizing detections along
the route in order.
}
Both elements also carry a \code{"route_sites"} attribute with the ordered route used.
}
\description{
Converts raw PTAGIS observation events into long and wide detection histories
along a specified route. The long table records each detection event,
while the wide table summarizes whether each tag was detected at each site and
includes an encounter history string.
}
\author{
Ryan Kinzer
}
