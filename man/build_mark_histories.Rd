% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/build_mark_histories.R
\name{build_mark_histories}
\alias{build_mark_histories}
\title{Build MARK capture histories from tag events using a flexible survival map}
\usage{
build_mark_histories(
  tag_history,
  locs_def,
  site_col = "site_code",
  tag_col = "tag_code",
  time_col = NULL,
  enforce_order = TRUE,
  keep_unknown = FALSE
)
}
\arguments{
\item{tag_history}{data.frame/tibble with at least tag_code and site_code; event_time optional for ordering}

\item{locs_def}{either a character vector of occasion labels in downstream order
OR a named list: names = occasion labels, each element = vector of site codes in that occasion}

\item{site_col}{column name with site codes (default "site_code")}

\item{tag_col}{column name with tag codes  (default "tag_code")}

\item{time_col}{optional time column to order within tag (POSIXct or parseable)}

\item{enforce_order}{logical; if TRUE keep first occurrence of each *increasing* occasion per tag}

\item{keep_unknown}{logical; if FALSE drop events whose site isn't in the survival map}
}
\value{
list(ch_data = tibble(tag_code, ch),
             ch_freq = tibble(ch, freq),
             mapping = tibble(site_code, occasion, occ_idx),
             dropped_summary = tibble(site_code, n))
}
\description{
Build MARK capture histories from tag events using a flexible survival map
}
